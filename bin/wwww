#!/usr/bin/env node

var debug = require('debug')('vacation-tracker');
var https = require('https');
var http = require('http');
var fs = require('fs');
var path = require('path')
var app   = require('../app');

var options = {
  key: fs.readFileSync(path.join(__dirname, 'holidaysjs.com.key')),
  cert: fs.readFileSync(path.join(__dirname, 'holidaysjs.com.crt'))
};

//app.set('port', process.env.PORT || 8080);

app.get('db_model').sequelize.sync().then(function () {
  //var server = app.listen(app.get('port'), function() {
    //debug('Express server listening on port ' + server.address().port);
  //});
  // Create an HTTP service.
  http.createServer(app).listen(80);
  // Create an HTTPS service identical to the HTTP service.
  https.createServer(options, app).listen(443);
  
});

